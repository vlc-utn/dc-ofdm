-- -------------------------------------------------------------
-- 
-- File Name: hdl_prj/hdlsrc/HDLRxDemodulator/rx_demod_optimized_src_SubcarrierSelector.vhd
-- Created: 2024-10-01 18:32:01
-- 
-- Generated by MATLAB 24.1, HDL Coder 24.1, and Simulink 24.1
-- 
-- -------------------------------------------------------------


-- -------------------------------------------------------------
-- 
-- Module: rx_demod_optimized_src_SubcarrierSelector
-- Source Path: 
-- Hierarchy Level: 3
-- Model version: 1.64
-- 
-- -------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.std_logic_1164.ALL;
USE IEEE.numeric_std.ALL;

ENTITY rx_demod_optimized_src_SubcarrierSelector IS
  PORT( clk                               :   IN    std_logic;
        reset_x                           :   IN    std_logic;
        enb_1_2_0                         :   IN    std_logic;
        varargin_1_re                     :   IN    std_logic_vector(23 DOWNTO 0);  -- sfix24_En14
        varargin_1_im                     :   IN    std_logic_vector(23 DOWNTO 0);  -- sfix24_En14
        varargin_2                        :   IN    std_logic;
        varargin_3                        :   IN    std_logic_vector(9 DOWNTO 0);  -- ufix10
        varargin_4                        :   IN    std_logic_vector(9 DOWNTO 0);  -- ufix10
        varargin_5                        :   IN    std_logic_vector(9 DOWNTO 0);  -- ufix10
        varargin_6                        :   IN    std_logic;
        varargout_1_re                    :   OUT   std_logic_vector(23 DOWNTO 0);  -- sfix24_En14
        varargout_1_im                    :   OUT   std_logic_vector(23 DOWNTO 0);  -- sfix24_En14
        varargout_2                       :   OUT   std_logic
        );
END rx_demod_optimized_src_SubcarrierSelector;


ARCHITECTURE rtl OF rx_demod_optimized_src_SubcarrierSelector IS

  -- Signals
  SIGNAL varargout_2_1                    : std_logic;
  SIGNAL reset                            : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validIn : std_logic;
  SIGNAL tmp                              : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validIn_1 : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_dataOut_re : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_im : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL varargin_3_unsigned              : unsigned(9 DOWNTO 0);  -- ufix10
  SIGNAL obj_SubcarrierSelectorObj_FFTLength : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_FFTLength_1 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_1                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_FFTLength_2 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_vecStepCount : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_vecStepCount_1 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_2                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_3                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_vecStepCount_2 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL s                                : std_logic;
  SIGNAL tmp_4                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_5                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_6                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL varargin_4_unsigned              : unsigned(9 DOWNTO 0);  -- ufix10
  SIGNAL obj_SubcarrierSelectorObj_numLGSC : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_numLGSC_1 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_7                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_numLGSC_2 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL s_1                              : std_logic;
  SIGNAL guard1                           : std_logic;
  SIGNAL tmp_8                            : std_logic;
  SIGNAL varargin_5_unsigned              : unsigned(9 DOWNTO 0);  -- ufix10
  SIGNAL tmp_9                            : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_FFTMinusRG : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL obj_SubcarrierSelectorObj_FFTMinusRG_1 : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_10                           : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_11                           : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL tmp_12                           : unsigned(16 DOWNTO 0);  -- ufix17
  SIGNAL s_2                              : std_logic;
  SIGNAL guard1_1                         : std_logic;
  SIGNAL guard1_2                         : std_logic;
  SIGNAL tmp_13                           : std_logic;
  SIGNAL tmp_14                           : std_logic;
  SIGNAL varargin_1_re_signed             : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL varargin_1_im_signed             : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataIn_re : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataIn_im : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re                           : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im                           : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataIn_re_1 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataIn_im_1 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_re_1 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_im_1 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_re_2 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_im_2 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_re_3 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_dataOut_im_3 : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re_1                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im_1                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re_2                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im_2                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re_3                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im_3                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re_4                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im_4                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_re_5                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL tmp_im_5                         : signed(23 DOWNTO 0);  -- sfix24_En14
  SIGNAL obj_SubcarrierSelectorObj_validOut : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validOut_1 : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validOut_2 : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validOut_3 : std_logic;
  SIGNAL obj_SubcarrierSelectorObj_validOut_4 : std_logic;
  SIGNAL tmp_15                           : std_logic;
  SIGNAL tmp_16                           : std_logic;
  SIGNAL tmp_17                           : std_logic;
  SIGNAL tmp_18                           : std_logic;
  SIGNAL tmp_19                           : std_logic;

BEGIN
  varargout_2_1 <= varargin_2;

  reset <= varargin_6;

  obj_SubcarrierSelectorObj_validIn <= '0';

  
  tmp <= varargout_2_1 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_validIn;

  obj_SubcarrierSelectorObj_validIn_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_validIn_1 <= '0';
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_validIn_1 <= tmp;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_validIn_reg_process;


  obj_SubcarrierSelectorObj_dataOut_re <= to_signed(16#000000#, 24);
  obj_SubcarrierSelectorObj_dataOut_im <= to_signed(16#000000#, 24);

  varargin_3_unsigned <= unsigned(varargin_3);

  obj_SubcarrierSelectorObj_FFTLength <= resize(varargin_3_unsigned, 17);

  obj_SubcarrierSelectorObj_FFTLength_1 <= to_unsigned(16#00040#, 17);

  
  tmp_1 <= obj_SubcarrierSelectorObj_FFTLength WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_FFTLength_1;

  obj_SubcarrierSelectorObj_FFTLength_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_FFTLength_2 <= to_unsigned(16#00040#, 17);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_FFTLength_2 <= tmp_1;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_FFTLength_reg_process;


  obj_SubcarrierSelectorObj_vecStepCount <= to_unsigned(16#00000#, 17);

  obj_SubcarrierSelectorObj_vecStepCount_1 <= to_unsigned(16#00000#, 17);

  tmp_3 <= tmp_2 + to_unsigned(16#00001#, 17);

  
  s <= '1' WHEN obj_SubcarrierSelectorObj_vecStepCount_2 = obj_SubcarrierSelectorObj_FFTLength_2 ELSE
      '0';

  
  tmp_4 <= obj_SubcarrierSelectorObj_vecStepCount_2 WHEN s = '0' ELSE
      obj_SubcarrierSelectorObj_vecStepCount;

  
  tmp_2 <= obj_SubcarrierSelectorObj_vecStepCount_2 WHEN obj_SubcarrierSelectorObj_validIn_1 = '0' ELSE
      tmp_4;

  
  tmp_5 <= tmp_2 WHEN varargout_2_1 = '0' ELSE
      tmp_3;

  
  tmp_6 <= tmp_5 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_vecStepCount_1;

  obj_SubcarrierSelectorObj_vecStepCount_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_vecStepCount_2 <= to_unsigned(16#00000#, 17);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_vecStepCount_2 <= tmp_6;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_vecStepCount_reg_process;


  varargin_4_unsigned <= unsigned(varargin_4);

  obj_SubcarrierSelectorObj_numLGSC <= resize(varargin_4_unsigned, 17);

  obj_SubcarrierSelectorObj_numLGSC_1 <= to_unsigned(16#00006#, 17);

  
  tmp_7 <= obj_SubcarrierSelectorObj_numLGSC WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_numLGSC_1;

  obj_SubcarrierSelectorObj_numLGSC_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_numLGSC_2 <= to_unsigned(16#00006#, 17);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_numLGSC_2 <= tmp_7;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_numLGSC_reg_process;


  
  s_1 <= '1' WHEN obj_SubcarrierSelectorObj_vecStepCount_2 > obj_SubcarrierSelectorObj_numLGSC_2 ELSE
      '0';

  guard1 <= '1';

  
  tmp_8 <= '1' WHEN tmp_2 = to_unsigned(16#00000#, 17) ELSE
      '0';

  varargin_5_unsigned <= unsigned(varargin_5);

  tmp_9 <= obj_SubcarrierSelectorObj_FFTLength - resize(varargin_5_unsigned, 17);

  obj_SubcarrierSelectorObj_FFTMinusRG <= to_unsigned(16#00040#, 17);

  
  tmp_10 <= obj_SubcarrierSelectorObj_FFTMinusRG_1 WHEN tmp_8 = '0' ELSE
      tmp_9;

  
  tmp_11 <= obj_SubcarrierSelectorObj_FFTMinusRG_1 WHEN varargout_2_1 = '0' ELSE
      tmp_10;

  
  tmp_12 <= tmp_11 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_FFTMinusRG;

  obj_SubcarrierSelectorObj_FFTMinusRG_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_FFTMinusRG_1 <= to_unsigned(16#00040#, 17);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_FFTMinusRG_1 <= tmp_12;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_FFTMinusRG_reg_process;


  
  s_2 <= '1' WHEN obj_SubcarrierSelectorObj_vecStepCount_2 <= obj_SubcarrierSelectorObj_FFTMinusRG_1 ELSE
      '0';

  guard1_1 <= '1';

  guard1_2 <= '0';

  
  tmp_13 <= guard1_1 WHEN s_2 = '0' ELSE
      guard1_2;

  
  tmp_14 <= guard1 WHEN s_1 = '0' ELSE
      tmp_13;

  varargin_1_re_signed <= signed(varargin_1_re);

  varargin_1_im_signed <= signed(varargin_1_im);

  obj_SubcarrierSelectorObj_dataIn_re <= to_signed(16#000000#, 24);
  obj_SubcarrierSelectorObj_dataIn_im <= to_signed(16#000000#, 24);

  
  tmp_re <= varargin_1_re_signed WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_dataIn_re;
  
  tmp_im <= varargin_1_im_signed WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_dataIn_im;

  obj_SubcarrierSelectorObj_dataIn_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_dataIn_re_1 <= to_signed(16#000000#, 24);
        obj_SubcarrierSelectorObj_dataIn_im_1 <= to_signed(16#000000#, 24);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_dataIn_re_1 <= tmp_re;
        obj_SubcarrierSelectorObj_dataIn_im_1 <= tmp_im;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_dataIn_reg_process;


  obj_SubcarrierSelectorObj_dataOut_re_1 <= to_signed(16#000000#, 24);
  obj_SubcarrierSelectorObj_dataOut_im_1 <= to_signed(16#000000#, 24);

  obj_SubcarrierSelectorObj_dataOut_re_2 <= to_signed(16#000000#, 24);
  obj_SubcarrierSelectorObj_dataOut_im_2 <= to_signed(16#000000#, 24);

  
  tmp_re_1 <= obj_SubcarrierSelectorObj_dataOut_re_3 WHEN s_2 = '0' ELSE
      obj_SubcarrierSelectorObj_dataIn_re_1;
  
  tmp_im_1 <= obj_SubcarrierSelectorObj_dataOut_im_3 WHEN s_2 = '0' ELSE
      obj_SubcarrierSelectorObj_dataIn_im_1;

  
  tmp_re_2 <= obj_SubcarrierSelectorObj_dataOut_re_3 WHEN s_1 = '0' ELSE
      tmp_re_1;
  
  tmp_im_2 <= obj_SubcarrierSelectorObj_dataOut_im_3 WHEN s_1 = '0' ELSE
      tmp_im_1;

  
  tmp_re_3 <= tmp_re_2 WHEN tmp_14 = '0' ELSE
      obj_SubcarrierSelectorObj_dataOut_re_1;
  
  tmp_im_3 <= tmp_im_2 WHEN tmp_14 = '0' ELSE
      obj_SubcarrierSelectorObj_dataOut_im_1;

  
  tmp_re_4 <= obj_SubcarrierSelectorObj_dataOut_re WHEN obj_SubcarrierSelectorObj_validIn_1 = '0' ELSE
      tmp_re_3;
  
  tmp_im_4 <= obj_SubcarrierSelectorObj_dataOut_im WHEN obj_SubcarrierSelectorObj_validIn_1 = '0' ELSE
      tmp_im_3;

  
  tmp_re_5 <= tmp_re_4 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_dataOut_re_2;
  
  tmp_im_5 <= tmp_im_4 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_dataOut_im_2;

  obj_SubcarrierSelectorObj_dataOut_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_dataOut_re_3 <= to_signed(16#000000#, 24);
        obj_SubcarrierSelectorObj_dataOut_im_3 <= to_signed(16#000000#, 24);
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_dataOut_re_3 <= tmp_re_5;
        obj_SubcarrierSelectorObj_dataOut_im_3 <= tmp_im_5;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_dataOut_reg_process;


  varargout_1_re <= std_logic_vector(obj_SubcarrierSelectorObj_dataOut_re_3);

  varargout_1_im <= std_logic_vector(obj_SubcarrierSelectorObj_dataOut_im_3);

  obj_SubcarrierSelectorObj_validOut <= '0';

  obj_SubcarrierSelectorObj_validOut_1 <= '1';

  obj_SubcarrierSelectorObj_validOut_2 <= '0';

  obj_SubcarrierSelectorObj_validOut_3 <= '0';

  
  tmp_15 <= obj_SubcarrierSelectorObj_validOut_4 WHEN s_2 = '0' ELSE
      obj_SubcarrierSelectorObj_validOut_1;

  
  tmp_16 <= obj_SubcarrierSelectorObj_validOut_4 WHEN s_1 = '0' ELSE
      tmp_15;

  
  tmp_17 <= tmp_16 WHEN tmp_14 = '0' ELSE
      obj_SubcarrierSelectorObj_validOut_2;

  
  tmp_18 <= obj_SubcarrierSelectorObj_validOut WHEN obj_SubcarrierSelectorObj_validIn_1 = '0' ELSE
      tmp_17;

  
  tmp_19 <= tmp_18 WHEN reset = '0' ELSE
      obj_SubcarrierSelectorObj_validOut_3;

  obj_SubcarrierSelectorObj_validOut_reg_process : PROCESS (clk)
  BEGIN
    IF clk'EVENT AND clk = '1' THEN
      IF reset_x = '1' THEN
        obj_SubcarrierSelectorObj_validOut_4 <= '0';
      ELSIF enb_1_2_0 = '1' THEN
        obj_SubcarrierSelectorObj_validOut_4 <= tmp_19;
      END IF;
    END IF;
  END PROCESS obj_SubcarrierSelectorObj_validOut_reg_process;


  varargout_2 <= obj_SubcarrierSelectorObj_validOut_4;

END rtl;

